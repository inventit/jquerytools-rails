/*
 
 jQuery Tools 1.2.7 / Overlay Apple effect. 

 NO COPYRIGHTS OR LICENSES. DO WHAT YOU LIKE.

 http://flowplayer.org/tools/overlay/apple.html

 Since: July 2009
 Date:    Tue Feb 28 10:05:12 2012 -0800 
*/
(function(h){function k(c){var e=c.offset();return{top:e.top+c.height()/2,left:e.left+c.width()/2}}var l=h.tools.overlay,f=h(window);h.extend(l.conf,{start:{top:null,left:null},fadeInSpeed:"fast",zIndex:9999});function o(c,e){var a=this.getOverlay(),d=this.getConf(),g=this.getTrigger(),p=this,m=a.outerWidth({margin:true}),b=a.data("img"),n=d.fixed?"fixed":"absolute";if(!b){b=a.css("backgroundImage");if(!b)throw"background-image CSS property not set for overlay";b=b.slice(b.indexOf("(")+1,b.indexOf(")")).replace(/\"/g,
"");a.css("backgroundImage","none");b=h('<img src="'+b+'"/>');b.css({border:0,display:"none"}).width(m);h("body").append(b);a.data("img",b)}var i=d.start.top||Math.round(f.height()/2),j=d.start.left||Math.round(f.width()/2);if(g){g=k(g);i=g.top;j=g.left}if(d.fixed){i-=f.scrollTop();j-=f.scrollLeft()}else{c.top+=f.scrollTop();c.left+=f.scrollLeft()}b.css({position:"absolute",top:i,left:j,width:0,zIndex:d.zIndex}).show();c.position=n;a.css(c);b.animate({top:c.top,left:c.left,width:m},d.speed,function(){a.css("zIndex",
d.zIndex+1).fadeIn(d.fadeInSpeed,function(){p.isOpened()&&!h(this).index(a)?e.call():a.hide()})}).css("position",n)}function q(c){var e=this.getOverlay().hide(),a=this.getConf(),d=this.getTrigger();e=e.data("img");var g={top:a.start.top,left:a.start.left,width:0};d&&h.extend(g,k(d));a.fixed&&e.css({position:"absolute"}).animate({top:"+="+f.scrollTop(),left:"+="+f.scrollLeft()},0);e.animate(g,a.closeSpeed,c)}l.addEffect("apple",o,q)})(jQuery);
